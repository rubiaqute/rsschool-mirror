(()=>{var e={700:()=>{console.log("\nСамооценка - 150 баллов\nДобрый день!\nПо пунктам выполнено все.\nИз дополнительного функционала:\n1) Перевод приложения на испанский язык. (+ подключен файл с цитатами на испанском языке). Язык можно выбрать в настройках.\n2) (актуалочка!) Добавлена информация о количестве случаев КОВИД (новых случаев на сегодняшюю дату, всего случаев и количество смертей). В списке можно выбрать три страны (по языкам приложения - Великобритания, Россия и Испания).\nДанные подгружаются с помощью асинхронной функции с https://api.covid19api.com. При выборе языка автоматически выбирается соответствующая страна, но пользователь может выбрать и вручную. Перевод блока на три языка также сделан\n\nТакже прошу обратить внимание:\n1) Должно работать все, но если вдруг какой-то функционал исчез - пожалуйста, сообщите - попробую исправить. Первый раз собирала через webpack - собралось с горем пополам только раза с пятого. Возможно, что-то отвалилось по дороге.\n2) Переключение треков по кнопкам-стрелкам реализовано немного не так, как в демо к заданию. Если играла музыка, то переключение трека переключает трек и автоматически его запускает. Но если музыка не играла, то переключение переключает трек, но автоматически его не запускает (в отличие от демо, где трек тут же начинает проигрываться).\nЯ считаю, что в данном случае это более логично. \n")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(()=>{"use strict";let e=[["Настройки","Settings","Los ajustes"],["Погода","Weather","Estado del tiempo"],["Цитаты","Quotes","Las Citas"],["Время","Time","El tiempo"],["Дата","Date","La fecha"],["Музыка","Music","La musica"],["Приветствие","Greeting","La salutacion"],["КОВИД-19","COVID-19","COVID-19"],["Язык","Languge","La lengua"],["Русский","Russian","Ruso"],["Английский","English","Ingles"],["Испанский","Spanish","Espanol"],["Источник изображений","Images source","El origen de imagines"],["Тэг изображений","Images tag","El tag de imagines"]],t=[["Статистика КОВИД-19 для:","COVID-19 stats for:","COVID-19 estadísticas para:"],["Страна","Country","El pais"],["Соединенное Королевство","United Kingdom","El Reino Unido"],["Россия","Russia","Rusia"],["Испания","Spain","Espana"],["Новые случаи","New confirmed","Confirmados nuevos"],["Всего подтверждено","Total confirmed","Confirmados total"],["Новые смерти","New deaths","Muertos nuevos"],["Всего смертей","Total deaths","Muertos total"]],o=[["Доброго утречка","Good morning","Buenos dias"],["Добрый день","Good afternoon","Buenas tardes"],["Добрый вечер","Good evening","Buenas noches"],["Доброй ночи","Good night","Buenas noches"]],a=[["Скорость ветра","Wind speed","La velocidad del viento"],["м/с","m/s","m/s"],["Влажность","Humidity","La humedad"],["Ошибка! Не найден город","Error! city not found for","Error! La ciudad no encontrada"]];const s=document.querySelector(".play-list"),r=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"01:50"}];r.forEach((e=>{const t=document.createElement("li"),n=document.createElement("span");t.classList.add("track"),s.append(t),t.textContent=e.title,t.appendChild(n),n.classList.add("small-play")}));const c=r;n(700);const l=document.querySelectorAll(".track");l[0].classList.add("current-track");const i=document.querySelector(".time"),u=document.querySelector(".date"),d=document.querySelector(".greeting"),m=document.querySelector(".name"),g=document.querySelector("body");let v=Math.floor(19*Math.random()+1);const h=document.querySelector(".slide-next"),p=document.querySelector(".slide-prev"),S=document.querySelector(".city"),y=document.querySelector(".quote"),f=document.querySelector(".author"),L=document.querySelector(".change-quote"),q=new Audio;let w,E=1,C=0,x="en-US",$="lang=en",I="Wrong tag!";const k=document.querySelector(".input-tag");let M=!1,b=0;q.src=c[b].src,document.querySelector(".song-name").textContent=c[b].title,document.querySelector(".time-audio .length").textContent=c[b].duration;const j=document.querySelector(".play"),A=document.querySelector(".play-next"),D=document.querySelector(".play-prev"),T=document.querySelector(".progress-volume"),N=document.querySelector(".volume-button"),R=document.querySelector(".progress-play"),U=document.querySelectorAll(".small-play");q.volume=T.value/100;let W=[[".weather","true"],[".quote-container","true"],[".time","true"],[".date","true"],[".player","true"],[".greeting-container","true"],[".extra-tools","true"]],G="./js/quotesEN.json";function V(){const e=(new Date).toLocaleDateString(`${x}`,{weekday:"long",month:"long",day:"numeric"});u.textContent=e}function Y(){const e=`${function(){const e=(new Date).getHours();return e>5&&e<12?`${o[0][E]}`:e>11&&e<18?`${o[1][E]}`:e>17&&e<24?`${o[2][E]}`:e>0&&e<6||0==e?`${o[3][E]}`:void 0}()}`;d.textContent=e}function B(){for(let e=0;e<W.length;e++)"true"==W[e][1]?(te[e].classList.add("switch-on"),document.querySelector(`${W[e][0]}`).classList.remove("hidden")):(te[e].classList.remove("switch-on"),document.querySelector(`${W[e][0]}`).classList.add("hidden"))}function H(){0==C&&function(){const e=(v+1).toString().padStart(2,"0"),t=O(),n=new Image,o=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg')`;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,n.onload=()=>{g.style.backgroundImage=o}}(),1==C&&async function(){null==w&&(w=O());const e=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=6b0e62b31d36361714f3a06d8297328d&tags=${w}&extras=url_l&format=json&nojsoncallback=1`,t=await fetch(e),n=await t.json(),o=Math.floor(Math.random()*n.photos.photo.length);if(0==n.photos.photo.length)return document.querySelector(".error").textContent=`${I}`,void setTimeout((()=>{document.querySelector(".error").textContent=""}),2e3);const a=await n.photos.photo[o].url_l;console.log(a);const s=new Image;s.src=`${a}`,s.onload=()=>{g.style.backgroundImage=`url('${s.src}')`}}(),2==C&&async function(){null==w&&(w=O());const e=`https://api.unsplash.com/photos/random?query=${w}&client_id=-LHVbAfsjEtQYmM1CEAmYotn-NEMWw2YpUls9nUaeuA`,t=await fetch(e),n=await t.json();if(null==n.urls)return document.querySelector(".error").textContent=`${I}`,void setTimeout((()=>{document.querySelector(".error").textContent=""}),2e3);const o=await n.urls.regular,a=new Image;a.src=`${o}`,console.log(a.src),a.onload=()=>{g.style.backgroundImage=`url('${a.src}')`}}(),console.log(w)}function O(){const e=(new Date).getHours();return e>5&&e<12?"morning":e>11&&e<18?"afternoon":e>17&&e<24?"evening":e>0&&e<6||0==e?"night":void 0}async function _(){const e=document.querySelector(".weather-icon"),t=document.querySelector(".temperature"),n=document.querySelector(".wind"),o=document.querySelector(".humidity"),s=document.querySelector(".weather-description"),r=document.querySelector(".weather-error");try{const c=`https://api.openweathermap.org/data/2.5/weather?q=${S.value}&${$}&appid=e57257892292e552c0054a48a736b278&units=metric`,l=await fetch(c),i=await l.json();r.textContent="",e.className="weather-icon owf",e.classList.add(`owf-${i.weather[0].id}`),t.textContent=`${Math.round(i.main.temp)}°C`,s.textContent=i.weather[0].description,n.textContent=`${a[0][E]}: ${Math.round(i.wind.speed)} ${a[1][E]}`,o.textContent=`${a[2][E]}: ${Math.round(i.main.humidity)}%`}catch(c){r.textContent=`${a[3][E]} '${S.value}'!`,e.className="weather-icon owf",t.textContent="",s.textContent="",n.textContent="",o.textContent=""}}async function F(){const e=G,t=await fetch(e),n=await t.json(),o=Math.floor(Math.random()*n.quotes.length);y.textContent=n.quotes[o].quote,f.textContent=n.quotes[o].author}function Q(){M?(q.pause(),M=!1):(q.play(),M=!0)}function K(e){e!=b?(U[b].classList.remove("paused"),l[b].classList.remove("current-track"),b=e,l[b].classList.add("current-track"),q.src=c[b].src,document.querySelector(".song-name").textContent=c[b].title,U[b].classList.add("paused"),j.classList.add("pause"),M=!1,Q()):(U[b].classList.toggle("paused"),j.classList.toggle("pause"),Q())}function X(){l[b].classList.remove("current-track"),U[b].classList.remove("paused"),b=(b+1+c.length)%c.length,l[b].classList.add("current-track"),q.src=c[b].src,document.querySelector(".song-name").textContent=c[b].title,M&&(M=!1,U[b].classList.add("paused"),Q())}function z(){0==T.value?N.classList.add("mute"):N.classList.remove("mute"),T.value,q.volume=T.value/100}function J(e){const t=e.offsetX/R.offsetWidth*q.duration;q.currentTime=t}function P(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}k.addEventListener("change",(e=>{k.value&&(w=k.value,H())})),H(),function e(){const t=(new Date).toLocaleTimeString();i.textContent=t,setTimeout(e,1e3),V(),Y()}(),h.addEventListener("click",(function(){v=(v+1+20)%20,H()})),p.addEventListener("click",(function(){v=(v-1+20)%20,H()})),S.addEventListener("change",_),window.addEventListener("load",F),L.addEventListener("click",F),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",m.value),localStorage.setItem("city",S.value);for(let e=0;e<W.length;e++)localStorage.setItem(`visibility${e}`,W[e][1]);localStorage.setItem("language",E),localStorage.setItem("imgSource",C),localStorage.setItem("inputtag",w)})),window.addEventListener("load",(function(){for(let e=0;e<W.length;e++)localStorage.getItem(`visibility${e}`)&&(W[e][1]=localStorage.getItem(`visibility${e}`)),B();localStorage.getItem("name")&&(m.value=localStorage.getItem("name")),localStorage.getItem("city")?(S.value=localStorage.getItem("city"),_()):(0==E&&(S.value="Минск"),1==E&&(S.value="Minsk"),2==E&&(S.value="Minsk"),_()),localStorage.getItem("language")&&(oe[E].classList.remove("active"),E=localStorage.getItem("language"),re(E)),localStorage.getItem("inputtag")&&(w=localStorage.getItem("inputtag")),localStorage.getItem("imgSource")&&(ae[C].classList.remove("active"),C=localStorage.getItem("imgSource"),se(C))})),j.addEventListener("click",(function(){j.classList.toggle("pause"),U[b].classList.toggle("paused"),Q()})),A.addEventListener("click",X),D.addEventListener("click",(function(){l[b].classList.remove("current-track"),U[b].classList.remove("paused"),b=(b-1+c.length)%c.length,l[b].classList.add("current-track"),q.src=c[b].src,document.querySelector(".song-name").textContent=c[b].title,M&&(M=!1,U[b].classList.add("paused"),Q())})),q.addEventListener("ended",X),T.addEventListener("change",z),T.addEventListener("mousemove",z),N.addEventListener("click",(function(){0==T.value?T.value=40:T.value=0,z()}));let Z=!1;R.addEventListener("click",J),R.addEventListener("mousemove",(e=>Z&&J(e))),R.addEventListener("mousedown",(()=>Z=!0)),R.addEventListener("mouseup",(()=>Z=!1)),q.addEventListener("timeupdate",(function(){const e=Math.ceil(q.currentTime/q.duration*100);document.querySelector(".time-audio .current").textContent=P(q.currentTime),R.value=e||0}));for(let e=0;e<U.length;e++)U[e].addEventListener("click",(t=>K(e)));q.addEventListener("loadeddata",(()=>{document.querySelector(".time-audio .length").textContent=P(q.duration)}),!1);const ee=document.querySelector(".settings");document.querySelector(".settings-icon").addEventListener("click",(function(){ee.classList.toggle("active")}));const te=document.querySelectorAll(".switch-btn");for(let e=0;e<te.length;e++)te[e].addEventListener("click",(t=>ne(e)));function ne(e){te[e].classList.toggle("switch-on");let t=document.querySelector(`${W[e][0]}`);"true"==W[e][1]?W[e][1]="false":W[e][1]="true",t.classList.toggle("hidden")}document.addEventListener("mousedown",(function(e){null===e.target.closest(".settings")&&"settings-icon"!=e.target.classList&&ee.classList.remove("active")}));const oe=document.querySelectorAll(".language");for(let e=0;e<oe.length;e++)oe[e].addEventListener("click",(t=>re(e)));const ae=document.querySelectorAll(".img-source");for(let e=0;e<ae.length;e++)ae[e].addEventListener("click",(t=>se(e)));function se(e){ae[C].classList.remove("active"),C=e,ae[C].classList.add("active"),H()}function re(n){oe[E].classList.remove("active"),E=n,oe[E].classList.add("active"),0==E&&(G="./js/quotesRU.json"),1==E&&(G="./js/quotesEN.json"),2==E&&(G="./js/quotesES.json"),F(),0==E&&(x="ru-RU"),1==E&&(x="en-US"),2==E&&(x="es-ES"),V(),0==E&&($="lang=ru"),1==E&&($="lang=en"),2==E&&($="lang=es"),localStorage.getItem("city")?(S.value=localStorage.getItem("city"),_()):(0==E&&(S.value="Минск"),1==E&&(S.value="Minsk"),2==E&&(S.value="Minsk"),_()),Y(),function(){0==E&&(I="Неверный тэг!"),1==E&&(I="Wrong tag!"),2==E&&(I="El tag incorrecto!");const t=document.querySelectorAll(".translate-item");for(let n=0;n<t.length;n++)t[n].textContent=e[n][E]}(),function(){const e=document.querySelectorAll(".covid-translation");de.value=E;for(let n=0;n<e.length;n++)e[n].textContent=t[n][E];me()}(),function(){const e=document.querySelector(".name");0==E&&(e.placeholder="Имя"),1==E&&(e.placeholder="Name"),2==E&&(e.placeholder="Nombre")}()}const ce=document.querySelector(".new-confirmed"),le=document.querySelector(".total-confirmed"),ie=document.querySelector(".new-deaths"),ue=document.querySelector(".total-deaths"),de=document.querySelector(".country-select");async function me(){let e;1==de.value&&(e=182),0==de.value&&(e=142),2==de.value&&(e=162);try{const t="https://api.covid19api.com/summary",n=await fetch(t),o=await n.json();ce.textContent=o.Countries[e].NewConfirmed,le.textContent=o.Countries[e].TotalConfirmed,ie.textContent=o.Countries[e].NewDeaths,ue.textContent=o.Countries[e].TotalDeaths}catch(e){console.log("Error")}}de.addEventListener("change",me),me()})()})();